from backend.grayscale import img_to_gray


def test_img_to_gray():
    raw_image = b"\xff\xd8\xff\xe1\x00\xdeExif\x00\x00II*\x00\x08\x00\x00\x00\x06\x00\x12\x01\x03\x00\x01\x00\x00\x00\x01\x00\x00\x00\x1a\x01\x05\x00\x01\x00\x00\x00V\x00\x00\x00\x1b\x01\x05\x00\x01\x00\x00\x00^\x00\x00\x00(\x01\x03\x00\x01\x00\x00\x00\x02\x00\x00\x00\x13\x02\x03\x00\x01\x00\x00\x00\x01\x00\x00\x00i\x87\x04\x00\x01\x00\x00\x00f\x00\x00\x00\x00\x00\x00\x00H\x00\x00\x00\x01\x00\x00\x00H\x00\x00\x00\x01\x00\x00\x00\x07\x00\x00\x90\x07\x00\x04\x00\x00\x000210\x01\x91\x07\x00\x04\x00\x00\x00\x01\x02\x03\x00\x86\x92\x07\x00\x16\x00\x00\x00\xc0\x00\x00\x00\x00\xa0\x07\x00\x04\x00\x00\x000100\x01\xa0\x03\x00\x01\x00\x00\x00\xff\xff\x00\x00\x02\xa0\x04\x00\x01\x00\x00\x002\x00\x00\x00\x03\xa0\x04\x00\x01\x00\x00\x002\x00\x00\x00\x00\x00\x00\x00ASCII\x00\x00\x00Picsum ID: 424\xff\xdb\x00C\x00\x08\x06\x06\x07\x06\x05\x08\x07\x07\x07\t\t\x08\n\x0c\x14\r\x0c\x0b\x0b\x0c\x19\x12\x13\x0f\x14\x1d\x1a\x1f\x1e\x1d\x1a\x1c\x1c $.' \",#\x1c\x1c(7),01444\x1f'9=82<.342\xff\xdb\x00C\x01\t\t\t\x0c\x0b\x0c\x18\r\r\x182!\x1c!22222222222222222222222222222222222222222222222222\xff\xc2\x00\x11\x08\x002\x002\x03\x01\"\x00\x02\x11\x01\x03\x11\x01\xff\xc4\x00\x1b\x00\x00\x02\x03\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\x03\x04\x05\x02\x01\x07\xff\xc4\x00\x17\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x00\x03\xff\xda\x00\x0c\x03\x01\x00\x02\x10\x03\x10\x00\x00\x01z\xed7\x9eT\xeb\xea\x95\xb4b\x16\xf2\xb6y>\\V\xe6\xa4q\x87E(\xeeu|\xa1dd+\x8elS\xb7'.\x98\xddij\\,\xfa\xc9\x10\xae\x1b\xa2W\xf0&we\x0e}\xc8\xc0\xa8\x00w\xff\xc4\x00$\x10\x00\x02\x01\x03\x04\x01\x05\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x00\x03\x11\x13\x04\x12\x14!1\x05\x10\x15 \"A\xff\xda\x00\x08\x01\x01\x00\x01\x05\x02\xc8\x92\xe2_\xeb\x96r6\xc5\xd4\xceu\xa7\xc9uS\xd4+\xbc:\xca\xf7\xcaH`b\xd7+3\x16\x81\xfbz\x9d\xef3\x1b\x8a{\xef\x1f\xf2o\x01\x84\xf5\xb9eG@*u\\\xf6qT K\xfb\n\xd5v\xb3\x86\x8bK{\xa6\x9dD\xc2\xb3\nN2\xc6'w\xf1\x00\xe3\x9f$\x0b\xb7\x89\xff\xc4\x00\x1b\x11\x00\x02\x03\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x11\x01\x02\x12\x10 1\xff\xda\x00\x08\x01\x03\x01\x01?\x01\xc8\x84.\x8c\xbd\xf4EY\x893$\x95\xf3\x9f\xff\xc4\x00\x1a\x11\x00\x02\x03\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x11\x12\x10Q\xff\xda\x00\x08\x01\x02\x01\x01?\x01\xd1\xa3K\x95\xe1H\xa2\x88\xc7#\x9d\x1b6\x84>\xff\x00\xff\xc4\x00$\x10\x00\x02\x01\x04\x01\x02\x07\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x11\x02\x10!21\x12Q Aar\x81\x91\xa1\xff\xda\x00\x08\x01\x01\x00\x06?\x02\xd9\x1c\xf8\xf993Q\x85,\xdb\xa7\xdamW\xd9)\x8e\xa9\xc5\xb2\xec\xbb\xd9T\xf8dA\xe9|\xda\xa4\xf8\x1cj\xf8!)5\xb4[Q5NN\xc4\xd5O\xcc\x9c`\xd7\xf4\xd0v\xa7\x1ee\x03\xc0\xad\xff\xc4\x00#\x10\x01\x00\x02\x02\x02\x00\x06\x03\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x11!A1q\x10Qa\x91\xb1\xd1 \x81\xf0\xff\xda\x00\x08\x01\x01\x00\x01?!\xcdY\xfb\x98\xae\x95\xdc\x03\xc2?\x8d\x13\x99EX\xc7)=\x8c\xf4\xfe\xe2O\xd0\x9cC\xdc\x81\xa1R\xd3\xe4B\xc5\xf9N \xf9Dp\xbe\xf2\x8eB\xf6\xcde\xb13\x18<\xfd'\xa8\xc3~\xba7\xdfR\xb9,UC\x80_$\xb8\x1e\t\xb5\r\xf8u\xf4\xf0`\xcdm\xa6\xe1UT\xd1\xa8\x10\xda4\xe4\xc13\x8c\xc6`\xafh\x04?S\xb7\xd7s1\xddn\xa6\xa1\x10r\xfd\xd7\x1b~\xa0\x9f\xdd\x8c\x1bh\xd4v\xdc\xe2N\x115^%\xea\x97\xd4\x05\xd5\xb9s\xff\xda\x00\x0c\x03\x01\x00\x02\x00\x03\x00\x00\x00\x10t\x13\xcc\xef:=O_\xf3\x05\xc7\xc1\xff\xc4\x00\x1b\x11\x00\x02\x02\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x111\x10!Qq\xff\xda\x00\x08\x01\x03\x01\x01?\x10i\xd1\x99\x90\xe8\xdb\x8d\x92\xc9$!<\x1dL\xd5\x8a\x05X\xff\xc4\x00\x1c\x11\x01\x00\x02\x02\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x11!Q\x10 1A\xff\xda\x00\x08\x01\x02\x01\x01?\x10\x16\xa0~\xc1<\x94\xc2\x8c]\x98\x91\xbe9\xb0b\xba\xed\x1f\xff\xc4\x00$\x10\x01\x01\x00\x02\x01\x03\x03\x05\x01\x00\x00\x00\x00\x00\x00\x00\x01\x11\x00!1AQaq\x81\x91 \xa1\xc1\xf0\xf1\xe1\xff\xda\x00\x08\x01\x01\x00\x01?\x10\x16~$\xe7\xdc\x14L\xfb\x1e7\xe9,\xbe\xe0\xc2\x00\xab\r\xfe1`)\xd6\x19\x02^K\xa7_\xe6Y\x95\r\x81\x9e\xb9!L\xf3T\xf3\xcb\x8b^E\xe5\\f\x12j\x0c\xfdp\xf6`U\xaa\xbcz\xe5\xd6\xc0\x13i\xfb\xac\xacPGf\xb0iz\x17\xbd\x7fr\xe4 ex\\z\xf5\xce\xcc<en(\x05\xa0:}\xdeYd\xde$v\xd6\xcf|\x1a2\x05)q\x08\x061\x11K\xb5\xb8\x12q\n\xc4\x0b\xf3\x9d\xed\xf92*\x84\xe8v\xe3\xcf\x18\xa6e\x12\xe8y\x9ds\xb0\x8a\x17\x1c\xa4\xb7\x1d?\x19B\xdc\x1b\xe0L\xbb\x06\xb9\xd7L\x9d\xc7\xce1\x8d*y\xf35\xd3\xae\x1bH)\x02v\x9e\xca\x0f\xbeS$\xec\x82\x9f_\xc6lAH\x95n\xf4\x0e\xf0\xb2(w\xa0\x1c\"\x05\xbeJ\x1e\xdc\xe7b\xce\x93\xfd\xe3\x9d\x91D\xe8nl\x96\xc3\x05\xe7\x1d\xd7\x11\xd78c!\x0e\xae\xb3\x9b\x14\xaco\x08@0Y\x95\xdd\xcf\xff\xd9"
    result = img_to_gray(raw_image)
    assert (
        b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x002\x00\x00\x002\x08\x00\x00\x00\x00;T\xd7m\x00\x00\x06\xb7IDATx\x9cm\x94\xcb\x8edG\x11@#2#\xf3\xbe\xab\xba\xab\x9f\x1e\x8fg\xc6\x06\x19\x83`\x83X\xb3\xf3o\xb0\xe4\x17\xf8\x08\xfe\x80\x05?\xc2\x82\x15\x0b\x84lK\xd8\xc2\x96\x8dq\xcf\xa3\xc7\xddU\xddU\xb7\xea>\xf3\x15\xc1\xa2g@F\xe4"\xa5\x0c\xc5\x89\x13\x91\x8b\xc0\x19\x11\x10@X! \xb0\x10\x00\x000\x00\x00\x08\x80 \x00\x00\xfc\xe0\x0eo\x82\x80 \x00\x08\x11Q!\x00\x88<0\x00\xf86\xe3\rB\xc2\x00\x82\x80J8\x81\xd2`\xde\x94\x07\x04\x01|\x8b\xc1[\n\x040\xbc\x15<D\xe5\xc1 \xa0\xff\xf3\xfa\xc1\x11\x01J\x88\x0f9\x88\x0fC \x02\xa0\x02\x00\x14@\x14\x94\xff\x85\xd0\xbf\xd1\xa2$\x01\xd4\x0f\x95\x1f\xda\xff\x81B\xdeZ\x84\xe6\x18\x12\x9a\xcc(x\x98:!\x00\x02\n\xe2\xffi\x0b\x04\x00\xe9\x137y,\xea\xbc\xce\xab\x1c\xe6a&m\xb2<\'\x94\xb7_\xf8_\x85\xa0\x00\xa0\xd0Z\x84\xc5w0\x16\xa5%C\xca\x91Q\xbaZ5\x16\x82\x99s\xe0\x90\xb1\xcb\x90\x15\xf8X@\x1a\x8bvC\x0c\x80\xc2Q(\xb4BYaA\x98\xd3\xa1\xcd\xcf\x95,\x0f\x1c1g!\x88\x9e\xc8\x18~\xf9\xf9U\xea[:(\xad$\xc5\x04\xa8\xb4\x84\x83\xd4\xd6"\xa3\x1f\xefs,\xe7,Q\x01)\xabA/\xee7\xdf=_\x1f\xa6t2P\xafI+a\x89\xac\xad\x8es\x1cla\x94\xceb\x12\x15\xc0\xb1\xedY\xd7\xf1\xe0\x9a?\xdf\xdf\r\xba\xce\xc6\xed\x96X$i\x05\xca\x8c#\x12\xa2\x9d\xa3W\x80\xa4K\xd6\\\x07\xc1\x1d\x99\xe0\xbf\xbeJ[\xd5\x9cL\xac\xf8\xf9\x9e\x02FT\xc0`}\xd2!\xa9\x04\x1c@P\xe9\xbe\x84\xf9r\x96\xe2J\x8b\x92u\x8b\xd5\x8e\xb3I\xe3=\x18\xea\x94V I\xb4G\n#[\xab\xb5\xd6\x1a\x00\xc3\xb8\xd5;\x97\xadu\xe0\x9a\x1eU\xff\xda\xda\xcbB\xc6{t4Pf\x940\xcb8F7g\x8bD\xd6\x90\x06\\\x84\xed\xcbt\xdd\xa9\xa6L!`\xc4\xf3\x83\xad\xf6p\xf4\x93\xbe\xa7\xb9\xe4\x11\x8a\x12ono\x9d5\xf2\xbd\x9c\xf9B?\n\xf9&\xec\xddw\x94n\xcb\x8dl\x8a\xca}xU.\xbe\xea\xf5\xe3\xd1)\x1a\x8a\xf96\xaep{\'!y\x15{fo\x16\x16\x87;\x0eb\xbc\x87\x17J\xd0\xba\xd0m*\xc0-\x14\x10\x81\xe6C\xea\x99xKl\x948\xb1\x98\xf8Pl5o\x93\xb2a\x1aBQ\xce\xcbl\x13o\x9a\xd6\xe5V\xf7S!dv\xd8\xe8\xd9\xe5\xe5\xed\x0e\xd8e\xc7\x0c\xd9\x98\xb6yL3)\xee\xa2Y\x96>7N\xcd\xab\xd6\xad\x0c9g\x84$\xeaL\r\x13X"O\xb5\x8ek[L]_\xa8\xc1Q\xa3Ts$i\xea\x94\xca\x8b\x9b\x94\xa76d\r\x0b\xdd\xe9|6\x99\x1f\xd2\xbbg\xdbl\xb5\xfd\xca\x93\xc7~\x98\xb2\xde\x1b\xc8D\xeb\x1e\xa6\x90x6\xbd\x1e\x0f.Q\x12\xa1-U\n\xd9TnVE\xe6w\xf7\'\xd9\xacg\x9cPH\xb3\x97\x83g\xc1!\xcf:,l\xfb*3j*D\xe9\xdd\x16\xe4\xbe\xcd\xf5\xed\xda\xd0n<\x9f\xa7\x9d\x9b\x95\x00\x90%\x05~\x7f\xe8\r\x9a\xa5V\xb2:\x99B\x17M\x12Rh\xdd\x08xU\xa8\xba_\x17\xe6\xba\xe1\x86\x0b\x872\x1bL"\x88\xd5\xd8e\x93\xd3\x89\xef\xb3\x0fF\xd9\xc7\xa3D\xdf_\\\xef\x9f\xfe\xb3P\x04>*\x9b\x9f\xb6\x80Jc\x1c\x894\xb2\x00\x8c\x01\xa2\x03TJ\x8e\x9a&\xb1\xd6\x9al{\x82\x9b\xfc\xe4f\t1Q\x96_\x8c0\xa5\x82\x1d\x94\xc0\x98XP+\xad9\xa1>\t[o\x01J@J#\xd1\xd5\xb3\\0M!L\xa8>r\xb7{05z\x14I\x11\xb0$\xc2(J\x05Y\x16f\xb7\xf3\x16h\xff\xa3\xd1\xd9\xd3]=\xc4\x148t\xf1\xb16\x12\x18\x90\x198\x04D-\xc2Q!t`\x84&(#\xd0\x87\x87\xe7\x7f\xfc\xfc\xf7?>\xbf\xe6\x90\xc8\x05\xb5Q\x88\x9c"\xe4\x0f[\tS\xc2\xc4\n\xb9\x18\xd6\x0eQh\x16\xea\xee\xff\xf0\xfa\xb3\xdf|\xfa\xad\x05\xa0\x0cD\xbb\xa6\x89.z\x04\x00@\x04\x05\x88\n5D\xaa(\xa0\xbf\xbfI\xa8\xfa\xdf\xce\xf7\x97\xff\xf8x\xc9\x02JK\xe4\xc1E7t\x93\x937\xbb?\xb2\x08@\x18s\n\xa3W\x9a\xdb\x03\xfe\xaej\xdf\x1f\xd4\'\xf3\xf4i\xfb\xde\x058\xff\xb2\xca\xb9\x1f\x85t"\xc33#\x9eh\xb1\x9d;r*\xcfx\x08\xca!-\x9a0\xd0\xea\x9d\xe7\xf9\xe3\xac\xefs\x1bj\x19\x93\xe4\x0cY`\xcf\x8c\x84q\x8e\x95\xd1\x19\xa6\x94@IHH$6U\xfaR\xbd\xe0aPj\xb9t\xdd!\x92\x02\xef\xd0\x12\xa0\x80\x92\xe8\xf3\n\xc0p\x04Bd\x10\xcaf$\xb8\x0e\xef5W\x07]\xc2\xa4\x8c\xb5\x80\x00\x18\xb40\xb3 $\x12\x04\x1cUH\xd1\x80\x96\x00\xb4\xda\xfa8n}*\xaa\x9cu\x06\xa3b+>\x812\x9a]\x04M\x18\x8c\n\xde\xa4(\x10\xa2"\x12 \xa4=\x17E\xbb\xc9\xaa\x0f^\x1c\x8ab\xe0\x14\xfd\x18\x01\xa0X\x10\xa7\x98\xf4\x9ct@\xadg-)\x11\xa2\x05:\xec\xae\x17\xae\xdate\xfd\xac{\xdejWO]0\x95\xe2xz\x9eC\xf2n?I\x910zI1")\xd1@a\x7f8=l\xbei\xb6\x0b[\x95\xba\xbe\xd8L#\x9d\xbeS\x88)\xb5\x8f\x94\xa9/\xb4]&\xe7\xbb\\<\xe7\x99\xf6\x01\xe8\xaf\xbbq\x9b.\xce\xad\xfa\xdb\t|\xfd\x14\x1ee\xe3X\xf1\x0e\xab\xf8\xe5\xc5|w\xb9\xb4\x8b"\xe5\r\xaec\x15\xcb\xaa\xc1n\xee\r=\xae\xe4\x11\xf8\xd7\xeb\x9f\xffr\xf3Q\xe3^\x87\xf3M~6\xbe\xda\x9cV\x01Pf\x93\x16\xa2\xb5Q\xcd\x07q\x9a\xbc\x92\xa6\xd2\n\x7f=\x96\x18\x86\\\xce?\xfeK\x95\xbf\xba^\xe1\xe8\xa6-\xd7\xe6\xdd\xf9\xd91\x1e\xab\xf9\x15\xa8\xd4\xcd\xe5J\xe6~H\xf9\xb2n\x99>;\xfa\x85eG\xe9\xbb\xf2\xc9\x97\xab>\x9f\xb80=\xbd{\x11M\x8eI\x87L\xbd7\x0b\xd4{*\x86\xa3\xa7V&\x9f\x86D\xc7\xe37\xc1v\xf5l\xfe~r\x80;\xecV\x07]\xe5*e\xa5\xc4\x1d\xc4\'g7\xd3\\-+\xd6\x89\xdb\x14\xe7\x10r\xa6}\x9a\xb0\x9f\xe3\xf8\xecO\x1f\xadSg\xec\x98\xa2/\xce\xce\x83\x0b\x87\xe3\xcb\x067*uN\xb4\x9f\xebC;`VVc\xa2\xcb\x94\xd0\x9d\x9dT\xdd\xcdU\x89Gj\xb5\xad\xa1k\x9e\x9e\xdfU\xaa==\xebw/~\xba\xb2bARlVVKH\x01\xf0WJ\xbf\x9f\x16\xd7\xeb\xb6\x82w\xa6\xb0]P\xc8\x1bc\xf4\xf4\xf4I\xb2\xd3k\x92\xa9\xcc\x14\x82\x9b)\xf99\x02\x91&\xfa\xd9\xedB\x1d^\xb6\xc5\x13\xf0\xb73\x140\x1f_\xbc\xbf\xf8\xf6\xe6X\x8fgq(k\xe3\xef\xbf\xf6\xab2H\x99\x1b\xc3\x0e\xea\x00\xe4\xda\x16\x02 \xb7\xa4s\xcb\x12\xcb\xe3\xf3\x93\xbc>:U\xa9\xef\xd7@j\x95\xe7\xae\xa6\x88s\x01)bP\x11\xfe\r\xaf\tR\x903\x14-\xd1\x00\x00\x00\x00IEND\xaeB`\x82'
        == result.grayscale
    )
    assert 50 == result.width
    assert 50 == result.height
