from backend.grayscale import img_to_gray


def test_img_to_gray():
    raw_image = b"\xff\xd8\xff\xe1\x00\xdeExif\x00\x00II*\x00\x08\x00\x00\x00\x06\x00\x12\x01\x03\x00\x01\x00\x00\x00\x01\x00\x00\x00\x1a\x01\x05\x00\x01\x00\x00\x00V\x00\x00\x00\x1b\x01\x05\x00\x01\x00\x00\x00^\x00\x00\x00(\x01\x03\x00\x01\x00\x00\x00\x02\x00\x00\x00\x13\x02\x03\x00\x01\x00\x00\x00\x01\x00\x00\x00i\x87\x04\x00\x01\x00\x00\x00f\x00\x00\x00\x00\x00\x00\x00H\x00\x00\x00\x01\x00\x00\x00H\x00\x00\x00\x01\x00\x00\x00\x07\x00\x00\x90\x07\x00\x04\x00\x00\x000210\x01\x91\x07\x00\x04\x00\x00\x00\x01\x02\x03\x00\x86\x92\x07\x00\x16\x00\x00\x00\xc0\x00\x00\x00\x00\xa0\x07\x00\x04\x00\x00\x000100\x01\xa0\x03\x00\x01\x00\x00\x00\xff\xff\x00\x00\x02\xa0\x04\x00\x01\x00\x00\x002\x00\x00\x00\x03\xa0\x04\x00\x01\x00\x00\x002\x00\x00\x00\x00\x00\x00\x00ASCII\x00\x00\x00Picsum ID: 424\xff\xdb\x00C\x00\x08\x06\x06\x07\x06\x05\x08\x07\x07\x07\t\t\x08\n\x0c\x14\r\x0c\x0b\x0b\x0c\x19\x12\x13\x0f\x14\x1d\x1a\x1f\x1e\x1d\x1a\x1c\x1c $.' \",#\x1c\x1c(7),01444\x1f'9=82<.342\xff\xdb\x00C\x01\t\t\t\x0c\x0b\x0c\x18\r\r\x182!\x1c!22222222222222222222222222222222222222222222222222\xff\xc2\x00\x11\x08\x002\x002\x03\x01\"\x00\x02\x11\x01\x03\x11\x01\xff\xc4\x00\x1b\x00\x00\x02\x03\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\x03\x04\x05\x02\x01\x07\xff\xc4\x00\x17\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x00\x03\xff\xda\x00\x0c\x03\x01\x00\x02\x10\x03\x10\x00\x00\x01z\xed7\x9eT\xeb\xea\x95\xb4b\x16\xf2\xb6y>\\V\xe6\xa4q\x87E(\xeeu|\xa1dd+\x8elS\xb7'.\x98\xddij\\,\xfa\xc9\x10\xae\x1b\xa2W\xf0&we\x0e}\xc8\xc0\xa8\x00w\xff\xc4\x00$\x10\x00\x02\x01\x03\x04\x01\x05\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x00\x03\x11\x13\x04\x12\x14!1\x05\x10\x15 \"A\xff\xda\x00\x08\x01\x01\x00\x01\x05\x02\xc8\x92\xe2_\xeb\x96r6\xc5\xd4\xceu\xa7\xc9uS\xd4+\xbc:\xca\xf7\xcaH`b\xd7+3\x16\x81\xfbz\x9d\xef3\x1b\x8a{\xef\x1f\xf2o\x01\x84\xf5\xb9eG@*u\\\xf6qT K\xfb\n\xd5v\xb3\x86\x8bK{\xa6\x9dD\xc2\xb3\nN2\xc6'w\xf1\x00\xe3\x9f$\x0b\xb7\x89\xff\xc4\x00\x1b\x11\x00\x02\x03\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x11\x01\x02\x12\x10 1\xff\xda\x00\x08\x01\x03\x01\x01?\x01\xc8\x84.\x8c\xbd\xf4EY\x893$\x95\xf3\x9f\xff\xc4\x00\x1a\x11\x00\x02\x03\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x11\x12\x10Q\xff\xda\x00\x08\x01\x02\x01\x01?\x01\xd1\xa3K\x95\xe1H\xa2\x88\xc7#\x9d\x1b6\x84>\xff\x00\xff\xc4\x00$\x10\x00\x02\x01\x04\x01\x02\x07\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x11\x02\x10!21\x12Q Aar\x81\x91\xa1\xff\xda\x00\x08\x01\x01\x00\x06?\x02\xd9\x1c\xf8\xf993Q\x85,\xdb\xa7\xdamW\xd9)\x8e\xa9\xc5\xb2\xec\xbb\xd9T\xf8dA\xe9|\xda\xa4\xf8\x1cj\xf8!)5\xb4[Q5NN\xc4\xd5O\xcc\x9c`\xd7\xf4\xd0v\xa7\x1ee\x03\xc0\xad\xff\xc4\x00#\x10\x01\x00\x02\x02\x02\x00\x06\x03\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x11!A1q\x10Qa\x91\xb1\xd1 \x81\xf0\xff\xda\x00\x08\x01\x01\x00\x01?!\xcdY\xfb\x98\xae\x95\xdc\x03\xc2?\x8d\x13\x99EX\xc7)=\x8c\xf4\xfe\xe2O\xd0\x9cC\xdc\x81\xa1R\xd3\xe4B\xc5\xf9N \xf9Dp\xbe\xf2\x8eB\xf6\xcde\xb13\x18<\xfd'\xa8\xc3~\xba7\xdfR\xb9,UC\x80_$\xb8\x1e\t\xb5\r\xf8u\xf4\xf0`\xcdm\xa6\xe1UT\xd1\xa8\x10\xda4\xe4\xc13\x8c\xc6`\xafh\x04?S\xb7\xd7s1\xddn\xa6\xa1\x10r\xfd\xd7\x1b~\xa0\x9f\xdd\x8c\x1bh\xd4v\xdc\xe2N\x115^%\xea\x97\xd4\x05\xd5\xb9s\xff\xda\x00\x0c\x03\x01\x00\x02\x00\x03\x00\x00\x00\x10t\x13\xcc\xef:=O_\xf3\x05\xc7\xc1\xff\xc4\x00\x1b\x11\x00\x02\x02\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x111\x10!Qq\xff\xda\x00\x08\x01\x03\x01\x01?\x10i\xd1\x99\x90\xe8\xdb\x8d\x92\xc9$!<\x1dL\xd5\x8a\x05X\xff\xc4\x00\x1c\x11\x01\x00\x02\x02\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x11!Q\x10 1A\xff\xda\x00\x08\x01\x02\x01\x01?\x10\x16\xa0~\xc1<\x94\xc2\x8c]\x98\x91\xbe9\xb0b\xba\xed\x1f\xff\xc4\x00$\x10\x01\x01\x00\x02\x01\x03\x03\x05\x01\x00\x00\x00\x00\x00\x00\x00\x01\x11\x00!1AQaq\x81\x91 \xa1\xc1\xf0\xf1\xe1\xff\xda\x00\x08\x01\x01\x00\x01?\x10\x16~$\xe7\xdc\x14L\xfb\x1e7\xe9,\xbe\xe0\xc2\x00\xab\r\xfe1`)\xd6\x19\x02^K\xa7_\xe6Y\x95\r\x81\x9e\xb9!L\xf3T\xf3\xcb\x8b^E\xe5\\f\x12j\x0c\xfdp\xf6`U\xaa\xbcz\xe5\xd6\xc0\x13i\xfb\xac\xacPGf\xb0iz\x17\xbd\x7fr\xe4 ex\\z\xf5\xce\xcc<en(\x05\xa0:}\xdeYd\xde$v\xd6\xcf|\x1a2\x05)q\x08\x061\x11K\xb5\xb8\x12q\n\xc4\x0b\xf3\x9d\xed\xf92*\x84\xe8v\xe3\xcf\x18\xa6e\x12\xe8y\x9ds\xb0\x8a\x17\x1c\xa4\xb7\x1d?\x19B\xdc\x1b\xe0L\xbb\x06\xb9\xd7L\x9d\xc7\xce1\x8d*y\xf35\xd3\xae\x1bH)\x02v\x9e\xca\x0f\xbeS$\xec\x82\x9f_\xc6lAH\x95n\xf4\x0e\xf0\xb2(w\xa0\x1c\"\x05\xbeJ\x1e\xdc\xe7b\xce\x93\xfd\xe3\x9d\x91D\xe8nl\x96\xc3\x05\xe7\x1d\xd7\x11\xd78c!\x0e\xae\xb3\x9b\x14\xaco\x08@0Y\x95\xdd\xcf\xff\xd9"
    result = img_to_gray(raw_image)
    assert (
        b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x002\x00\x00\x002\x08\x00\x00\x00\x00;T\xd7m\x00\x00\x06\xd6IDATH\r}\xc19\x8f\\Y\x15\x00\xe0s\xce]\xde}[m\xdd\xd5\xed\x1e/\xd3\xb2\x99\x99\x00\x04H,"\x81\x08\x12\xfe\x01b \x98\x18\x11\xa1\t\x119\x08$\x9c \x02\x88\'\x80\x08$\x02\x04B\x9a\x00\xc10\x12\x18\xcb6\x96q\xb7\xdd[u\xd7^\xf5\x96\xfb\xeer\xb0\t\xc8\x9a\xefC\x8f\x88\x00\xc0\x81\x08\x00b\x94\x00\xc0\xc0\x80p\x1dd\xf8\x1f\x06\x04p\x80\x84\x08\xc0p\x1d\x0c\xcc\xc0\x08H\x1c#\x10!\xc2+\x0c\xff\x072\xbc\xc6\x00\x08\xaf1\x02\xf0+ \xe0:\xe8\x10\x11\x98\x19\x10^c@\x00\x04\x84\xeba\x04\x06@\x04\xe0\x10\x81\x04\xc2\x7f1\\\x0fk\xef\x02\xaaD\x11\xc2k\x1c\x10^A@\xb8\x0e~h\x9b\x0e\xd3\xc2\xe4&7\xd0V\xad\x14*1\x89B\x86\xeb\xe0\xaf\x99#\x00B\x9dfZ*IVJ\x12\xf9\xb0L\xc0\xa9&\xe5\xe8L\xe8\x12\n\x84\x9d\xcb\xd0\xd7\xe9\xe2\n\x7f\x05\x001\x06F`\x16I\xaaA\x8a\x18(5c\x11\xfb\xab\xd2\xa3Q1J\xdfI\x85\x10_<8\xf2\xdb%\xfe\x92\x04q\xf0\x11\x80\x04A\xe4\\k\x8c\xa8T4\x985&\xc8\x14BR\x80\xe8\xcf\xae\x9e\x1f_\xae\xeb0Z\xe2}!\x05qd\x17\x85\x16\xbe\xf5J\xa7\x8a\x84V>#\x01\x10\x12f*\xcc\xda\x16\x7f\x9cM+*\xb0\x82\x19\xfe\x14\x05\x11\x01pmQ \xa9VH\x02\x94"\xcbE,\x1c\xa7K\xa9\x8c\xfd\xd7\x91\x9fc)\x1aA\x9b\xa3%\xfe\x08_\x01\x06U{\x01\x814 \x02 \x89\x98A{\xa3\xe5\xf4X0\xc5\xcb\x19\xca\x85J\x1a\x01\xd3m\x85\xdf\'A\xc0\x81E\x07\xca\xd5!I\x84\x14\xaf\x10\xaaf~ka\x93+\xd9\xc5\\\xca\xfc\xd9\x91\xdaG\xae\x9ec\x85\xdf\x93ZQ\xf4\x81\xb6\xb5o\xdb\xa4\xc7Rk)\x10{0\x7f\xf9\xc6\xe9F\x94Yp\x1a\x1d\xee\x1d\xa9\xc1\n\xd2z\xbb\xc1\xefdI\x00\x93\xc0\xc5\xc5\x85U\x8a\x03\xecu\x99\xb8\xe9Lt\xab5\xc8\xf5\xf4^\xcb\xd3,\xb7o_f\xc5\xe3\r\xdd\xaa,\xe1{\xbb<\xf1C\x9cM\xa3\xedD\xe2*\xee9\xd5\xdfG9\x8d\x8e%TkE\x00}\xf6w^d;\xe7G|\x1b<\xe07za\x1e\xcb0\xa3\xe0}|\x05\x85\xb7\xfb\x99\x8c\xf3@\x1a\x9a\xaaK\xb3v\xd0\xbb\n\xc3d\xa9\x93#a\x9a\x94\xf1[-\xa4\xa2mc:Y@\xb0\xc9  .\xf7\x9d\t\xd6\n\x13\xd6N\xedfW\xe3\xfc\x88\xf2\x83S>x*|]2~\xb3\x12C\xb1XC\xb9ZXi(^\xe8t\xb5S\xa5TYYR\xa7\x07\xacN\x87\xfdKSXk\x06\x1f\xbb\xa4$\xc6\xafI\x93)\xbf\xa9z\xfdn\x9e\x8cf\x8f\xeaL5\xba\xa6d\xebd\xa1\xa1\x18la\xa2F\x1d\xf56\x02\xfcY0\xa5`\xfc\x9c\xcc\x87i\xe8\xbc\xefQ\xab\xc5\xcb\x87\x83\xb4\x05\x17\xdb\xcc\xb2L\x04+\x13\xb9iw\xcd\xa60z\xf92AA)\xe0\x17\x96\xf9]3\r;m%Fz>\xa9\xd6\xc92\xeb\xd2ma\x85R\x18#0&\xdb\x1b\xa3\xf3\\\x1d\xac\xfe\x9cuE\x8e\x84_\\\xf6\xf7B\xe0uF\x83n\x92\xfa\x87\x99\xe1H\xd6\xa7k\x95\x103b\xde\x84\xc4\x08\xa1\xb0L\xcek^\xaaA\xc4\xdb7N\x8b\xc3\xa7\x19\x958\xf0\xcb\x92\x9e\xcd\r\xa2\xb6\x8d`\xa5\x91#":\xd0\nPP1\xb0\x10&d\x00\xefa\x8a\xa2\x1d_\xecA\x1e\xeaar\xfeoj\x83\t5dJb\x88\x80\x02\x84\x84\x80b\xd7Q\xa7aUF\xc4\xc3zG\x9e\x1c\x8e\x9f\xdf\x08\xc2\xb9^\xba\x92\xedd\xa5\xc9c\'\x05\x87\x00\x98I\x89!\nY\xc00U\x8b\x93T"\x8e\xee5n\xf9\xe9\x85\xc7\xe0]\xcc\xb4\xbb\xd5\x9e\\\x92\x88\xd8I\x8a\xde#\xa6ZFOJ\x03\x8c2\xb9\x9e\x8d:\xc0/m\x8e\x7f\xf1\xe0\x87\x9f\xd8;\x8d.\x08ET\xd2\xe2*\xb2cC\x14]\x00RZ\x86(\xb5\xc8*\xb6\x84|g\x1d\xf1S\xd3\x1f_\xfe\xfe\x8d\x8f\xaf4t\xa8\x81\xb5,\xed\xbc\xf5\x16\x91(\xb8\x08B$2\xb2\x14<\xf2\xcaQ7+\x1c\xe3\xddo\x1f>?\x7f\xf4\xe5\xdfn\xd1\x91\xf1\xde\xb8\xa1\xbf\xdavA$\x02\x83\x0fH\x90\xaa\x082\xba{\xad\xaf5\xcd\x93\x19\xe2\x0f\xb2\xe5\xe1\x96>j\xea\xbf-n\xef\x81\xedNr\x13\xb65K\nB\xc56\x90\xd8\x15\xac7v`\xc9\x98X9l\x01\x7fR^\xe6b\xf8\xf7#\x7ft\xd9\xb1\xd1\xces\x0c\x91#h\x17 xT\xa2\xf0>\xc7Xv\x81\x12h\xdb\xe0\x00\xef\'k\xec\x95g\x93\xa3\'\xc7\x15\x0e\xc6\xdan\xd6^R\xe8"j\xc9\x8eQ\xa6\xb6\xeb\xe5 \xd9\x06)}\xeb\x02\xe0\xcf\xacS\xe9\xda\x15\x8b\xdf|$\n]\xe4\xb4]w\x88\xc1\xb52\x1110\n\xc3>\xcd\xa1C\xefIb\x08\r\xe0\x07\x8b\r\x8a+\xdbO~\xf7\x97Pd\x1a\xc8w\xb6\x0b\x00A\x80s %I\x19)\x936B\x0c \x04m\x00?X\x1d\xc5\x94\xce\xb6\xea\xf2\xf8\xd8\xee\xf7+\x08\xb6\xa9\x1d\x00d=\x19\x83\x0f\xd4\n\x11\xd2<\xb4"vAjr\x80?\x9f?\xea\xc9\xec\xf1\xc6d\xd5?\x8e{\xbb6\xdb\xae\x9d\xd4\xc4~w\xcf@\xe8\xec\xf2J\x94\x01u\x17\xd1;4\x92#\xe0\xfd\xd3G\xf7\xd6\xcd\x83\xa2-\xd5\xd9qr+\xbf\x9c-\xf5\xc1A\xca:\x13\x9d\x97\t\xfd\xf3D\xef\x05\xdb\xad\rw\xd1\x14\xa2k\x00\xdf]\xd6\xb7\xe38*\xf8\xeb\xfe\xecOo\xcb\xb7\xa6O\xe6y\x9e\x8f\xf2p\xb6\xdfNo\xf4\xf5\xc4\x05S\xe2\xe5y\xee!/q\xb3\x9aI|\x7f\t7\xb1;\x9d|\xd2_\r\xcf\xba\xf3[\xfaa3\xaeO\xc4n\xbe\xba\xd9]\x0e\xcb\x04\x80\xa4\x14\x00\xae\xad\x1d\x02\x87\t\xe2W\x9a\\\xf8*\x89\xe3\xaf~X\xa4\xa7\xe7#\xae\xbaf\x1e\x0bu\xab=\x1c\xd2\x90\xda\x13\xa0\xb0i\xb3\x11\xb7\xdb*\x98~1\x8fX\x0e>c\xf8\xd4\xb8\xf5w\x9f<\xde9s\xe8M\xbc\xa8o\xee{\xed\x86\xa5,\x93\x8e\xdb\x88\xf5Z\x0c\xb6Y/\x89\xad\rW\x01o7;\xdel\x8aZ|}\xe7\x0f\x83\x13\xda\x0e\x1a\xa1b6L2\x8e\x00\x83;\xfd\xf3iSd!\xc8-@t\xb6s\x89\xc7\x92\x87"\xb6\xa2\xbe\xe3\xdfy<\xbeH\x08=bzg\xcf[\xbf\x1e\x1c\x94y\x1b\xcff\xc9@Z\x9bo\x165\x98T7\x01\xdf\x8a,\xaa\xd10[\x9f\x0f\xb1l\xc4\xce4\x87M\xef\xb3{\xd3\\,\xc6\xe3\xed\xe2\xc5;\xeb-k\xa8\xeb\\(-\xd8\x05\x8f\xf8yRw\xb9w:Ydp`\xfd\xb2\';SJ-\x9a7\xdf\x0c\xba9S\xb1J\x13B\xb0\xad\x0c]\xebAJ\xa9\xf0\xbdI?Y\xcd\x97\xa6\x0f\xb6j\xd1\xe80\xdc?,\x9f]\x0cG\xa3\xb1\xbfp\x85\xecf/\xed(s13\xd1E\x0b\x85\x03|\xf7\x18\xc0\x81\xd5 \x05\x84\xc8\\\x1c\xdc\xbc\x9d<\x9d\xedQVl\xcf`\x9c\xf5\x9a\xa9-\xa4\xc36\x85\xe0+\x97o\xe1?:\t\xf0\x0cb\r\xeb\xc9\x00\x00\x00\x00IEND\xaeB`\x82'
        == result.grayscale
    )
